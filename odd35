#include<bits/stdc++.h>

#define ll long long
#define ull unsigned long long
#define pb push_back
#define mp make_pair
#define pii pair<int, int>
#define pll pair<ll, ll>
#define vll vector<ll>
#define vvll vector<vector<ll>>
#define vb vector<bool>

using namespace std;

void solve() {
	
}

typedef struct {
	int cur_ans;
	int t, s;
	int diff_t, diff_s;
} node;

int main(){
	
	
	ios_base::sync_with_stdio(false);
	cin.tie(0);
	
	
	int n;
	cin >> n;
	
	
	// i = separation between each line = a*t + b*s
	vector<pair<int ,int>>v(n, {0, 0});
	vector<bool>is_open(n, false);
	
	for (int i = 0 ; i < n; i++) {
		string s; 
		cin >> s;
		for (int j = 0 ; j < s.length(); j++) {
			if (s[j] == 't') v[i].first++;
			else if (s[j] == 's') v[i].second++;
			else if (s[j] == '{') is_open[i] = true;
		}
	}

	stack<node>s;
	int cur_ans = 0;
	s.push({0, v[1].first, v[1].second, v[1].first, v[1].second});	// the indentation we have to match
	
	for (int i = 2 ; i < n - 1; i++) {
		node &last = s.top();
		if (last.cur_ans == 0) {
			last.cur_ans = cur_ans;
		}
		else if (last.cur_ans != cur_ans) {
			cur_ans = -1;
			break;
		}
		
		if (is_open[i] == false) {
			int diff_s = v[i].second - last.s;
			int diff_t = last.t - v[i].first;
			// if one diff is 0, the other diff must also be 0
			if ( (diff_t == 0 && diff_s != 0) || (diff_s == 0 && diff_t != 0) ) {
				cur_ans = -1;
				break;
			}
			
			if (diff_t == 0 && diff_s == 0) {
				s.pop();
				continue;
			}
			
			if (diff_s % diff_t != 0) {
				cur_ans = -1;
				break;
			}
			
			if ( (double)diff_s  / diff_t < 0) {
				cur_ans = -1;
				break;
			}
			
			int tmp = diff_s / diff_t;
			if (cur_ans == 0) {
				cur_ans = tmp;
			}
			else if (cur_ans != tmp) {
				cur_ans = -1;
				break;
			}
			s.pop();
		}
		else {	
			int diff_s = v[i].second - last.s;
			int diff_t = v[i].first - last.t;
			if ( (diff_t == last.diff_t && diff_s != last.diff_s) || (diff_s == last.diff_s && diff_t != last.diff_t) ) {
				cur_ans = -1;
				break;
			}
			
			if (diff_t == diff_s) {
				s.push(last);
				continue;
			}
			
			int w = diff_s - last.diff_s;
			int z = last.diff_t - diff_t;
			if (w % z != 0) {
				cur_ans = -1;
				break;
			}
			
			if ( (double)w  / z < 0) {
				cur_ans = -1;
				break;
			}
			
			int tmp = w / z;
			if (cur_ans == 0) {
				cur_ans = tmp;
			}
			else if (cur_ans != tmp) {
				cur_ans = -1;
				break;
			}
			s.push({cur_ans, v[i].first, v[i].second, diff_s, diff_t});
		}
	}
	if (cur_ans == 0 ) cout << "-1\n";
	else cout << cur_ans << "\n";
}


